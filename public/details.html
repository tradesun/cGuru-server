<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Assessment Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body class="page-bg bg-white text-slate-900">
    <div class="fixed-menu-header">
      <div class="fixed-menu-header-container">
        <div class="fixed-menu-logo">
          <img src="/images/CHG_Logo_200.png" alt="Tech Partner Assessment Dashboard" />
        </div>
        <div class="flex items-center gap-2 header-buttons">
          <a id="backLink" href="/index.html" class="button-outline flex items-center">Back to Dashboard</a>
          <a id="btnActionsDetails" class="button-primary" href="#">Actions</a>
        </div>
      </div>
    </div>
    <header class="header-bar">
      <div class="header-bar-logo">
        <img src="/images/TPOS_highres.png" alt="Assessment Details" />
      </div>
      <div class="header-bar-text">
        <h1 id="detailsTitle" class="title-main text-2xl md:text-3xl">Assessment — Detailed Assessment</h1>
        <p class="subtitle text-sm md:text-base mt-1">Dive into categories, review individual questions, and push actions straight into your Next Steps.</p>
      </div>
    </header>

    <!-- Overview band -->
    <div class="bg-gradient-to-r from-white to-[rgba(31,181,172,0.05)] ">
      <div class="layout-container py-6 grid grid-cols-1 lg:grid-cols-12 gap-6">
        <!-- Score card -->
        <div class="lg:col-span-3 card card-lg shadow-sm">
          <div class="p-5">
            <div class="text-sm text-slate-600">Overall score</div>
            <div class="flex items-end gap-2 mt-1">
              <div id="overallPercent" class="text-4xl font-extrabold text-teal-600">--%</div>
              <div id="overallTrend" class="text-xs text-emerald-600">+0% last 30 days</div>
            </div>
            <div class="mt-5 space-y-1 text-sm">
              <div>Benchmark: <span id="overallBenchmark" class="font-semibold">64%</span></div>
              <div>Peers (ANZ MSPs): <span id="overallPeers" class="font-semibold">61–72%</span></div>
              <div class="text-slate-500">Last update: <span id="overallUpdated">--</span></div>
            </div>
            <button id="btnCompleteAssessment" class="button-primary button-rounded w-full mt-4">Complete Assessment</button>
            <video id="overviewVideo" class="mt-4 w-full rounded-xl border" style="border-color:#E5E7EB" controls preload="metadata" src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"></video>
          </div>
        </div>

        <!-- Radar + category list -->
        <div class="lg:col-span-9 card card-lg shadow-sm">
          <div class="p-5 grid grid-cols-1 lg:grid-cols-12 gap-6" style="margin-top: 20px;">
            <div class="lg:col-span-6">
              <div class="text-sm font-semibold mb-2">Sub Categories</div>
              <ul id="categoryList" class="category-list space-y-2"></ul>
            </div>
            <div class="lg:col-span-6">
              <div class="text-sm font-semibold mb-2">Operational Maturity Across Sub Categories</div>
              <div class="grid grid-cols-1 lg:grid-cols-12 gap-4">
                <div class="lg:col-span-9">
                  <div id="maturityChart" class="space-y-2"></div>
                  <div class="mt-2 text-xs text-slate-500">Maturity Level (%)</div>
                </div>
                <div class="lg:col-span-3">
                  <div class="text-xs font-semibold mb-2">Legend</div>
                  <ul id="maturityLegend" class="space-y-1 text-xs">
                     <li class="flex items-center gap-2"><span class="inline-block w-3 h-3 rounded bg-sky-50 border"></span> Awareness</li>
                    <li class="flex items-center gap-2"><span class="inline-block w-3 h-3 rounded bg-sky-100 border"></span> Foundation</li>
                    <li class="flex items-center gap-2"><span class="inline-block w-3 h-3 rounded bg-sky-200 border"></span> Developing</li>
                    <li class="flex items-center gap-2"><span class="inline-block w-3 h-3 rounded bg-sky-300 border"></span> Scaling</li>
                    <li class="flex items-center gap-2"><span class="inline-block w-3 h-3 rounded bg-sky-400 border"></span> Optimizing</li>
                    <li class="flex items-center gap-2"><span class="inline-block w-3 h-3 rounded bg-sky-600 border"></span> Leading</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Selected category heading outside panels -->
    <div class="layout-container py-6 selectedCategoryTitleTop-wrap">
      <div class="text-sm uppercase tracking-wide text-slate-500 mb-1">Selected Sub Category</div>
      <h2 id="selectedCategoryTitleTop" class="text-xl font-semibold">—</h2>
    </div>

    <!-- Answers + Recommendation panels -->
    <div class="layout-container pb-8 grid grid-cols-1 xl:grid-cols-12 gap-6">
      <!-- Left: Your Answers (7 cols) -->
      <section class="xl:col-span-7">
        <div class="card card-lg shadow-sm">
          <div class="p-0">
            <div class="p-5 border-b text-sm font-semibold selectedCat-yourAnswers">Your Answers</div>
            <div id="questionsContainer" class="divide-y"></div>
          </div>
        </div>
      </section>

      <!-- Right: Recommendation (5 cols) -->
      <aside class="xl:col-span-5">

             <!-- Assessment-level Why and Tips panel -->
             <div class="card card-lg shadow-sm " style="margin-bottom: 20px;">
              <div class="p-5">
                <div class="text-sm font-semibold">Why this matters</div>
                <p id="assessWhyText" class="text-sm text-slate-700 mb-3">—</p>
                <div class="text-sm font-semibold">Quick tips</div>
                <ul id="assessQuickTips" class="list-disc pl-5 text-sm text-slate-700 space-y-1"></ul>
              </div>
            </div>


        <div class="card card-lg shadow-sm">
          <div class="p-5">
            <div class="flex items-center gap-3 mb-3 selectedCat-scoreNstageWrap">
              <div id="selectedCategoryPercent" class="percent-pill">--%</div>
              <div class="text-base font-semibold text-slate-800 selectedCat-stageWrap"><span id="selectedCategoryStage">Stage —</span> • <span id="selectedCategoryStageName">—</span></div>
            </div>
            <div class="text-sm font-semibold selectedCat-whyItMatters">Why this matters</div>
            <p id="whyText" class="text-sm text-slate-700 mb-3">—</p>
            <div class="text-sm font-semibold">Recommended action</div>
            <div id="actionTitle" class="text-sm text-slate-800 mb-2">—</div>
            <ul id="actionBullets" class="list-disc pl-5 text-sm text-slate-700 space-y-1 mb-4"></ul>
            <button id="addNextBtn" class="button-primary button-rounded px-4 py-2">Add to Next Steps</button>
          </div>
        </div>


   



      </aside>
    </div>



    <script src="/js/constants.js" defer></script>
    <script src="/js/ui.js" defer></script>
    <script src="/js/details.js" defer></script>
    <script>
      (function(){
        function getParam(name){ try { return new URLSearchParams(window.location.search).get(name); } catch { return null; } }
        document.addEventListener('DOMContentLoaded', function(){
          var a = document.getElementById('btnActionsDetails');
          if (a) {
            var email = getParam('email') || '';
            a.href = email ? ('/next.html?email=' + encodeURIComponent(email)) : '/next.html';
          }
        });
      })();
    </script>
  </body>
  </html>




